function [logit_model, boost_model] = run_pipeline(A, y)
    
    %[boost_model] = ensemble_model(A, y);
    %logit_model = boost_model;
    
    %now perform logistic regression on training set
    logit_model = LogitLinearModel(A, y,[],setoptions('SelectFeatures', 50000));
    boost_model = logit_model;

    fprintf('Finished running pipeline.\n');
end

function [model] = ensemble_model(A, y)

    model = BoostModel(A, y,[],setoptions('Subsample',.40,'SelectFeatures', 50000));
    model.addBagModels(3,'logit');   
    
    models = model.getModels();
    
    w = models{1}.getModelWeights();
    total = abs(w);
    for iter=2:length(models)
       w = models{iter}.getModelWeights();
       total = total+abs(w);
    end  
    
    maxw = max(total);
    
    model = LogitLinearModel(A, y,[],setoptions('SelectFeatures', abs(total)>maxw*1.0e-6));

end